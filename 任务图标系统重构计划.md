# 任务图标系统重构计划

## 📋 **目标**
将固定的任务类型分类系统改为灵活的"名称+图标"组合，用户可自由选择图标而不受业务类型限制。

## 🔍 **现状分析**
- 当前使用固定的4种任务类型：`development`, `testing`, `delivery`, `default`
- 图标与业务类型强绑定，限制了用户的灵活性
- 涉及37个文件需要修改，包括类型定义、组件、菜单等

## 🛠️ **重构方案**

### 1. **类型系统重构**
- 移除 `TaskType` 固定枚举，改为 `iconType: string` 
- 保持向后兼容，支持现有的4种类型作为默认选项
- 扩展图标库，从 lucide-react 中选择更多图标

### 2. **图标系统扩展**
- 扩展 `src/components/icons/index.ts` 添加更多实用图标
- 重构 `TaskIcon.tsx` 支持动态图标选择
- 保持颜色系统，但允许用户自定义

### 3. **组件更新**
- `TaskIconSelector`: 从固定4种改为可扩展的图标网格
- `TaskContextMenu`: 更新图标选择逻辑
- 所有相关组件更新类型引用

### 4. **数据结构调整**
- Task 接口中 `type` 字段重命名为 `iconType`
- 支持自定义图标名称和显示标签
- 保持数据向后兼容性

## 📊 **影响范围**
- **核心文件**: 5个 (类型定义、TaskIcon、TaskIconSelector)
- **依赖文件**: 37个 (需要更新类型引用)
- **图标库**: 扩展 10-15 个常用图标

## ⚡ **实施优先级**
1. **高优先级**: 类型定义和核心组件重构
2. **中优先级**: 图标库扩展和选择器UI改进  
3. **低优先级**: 数据迁移和兼容性处理

## 🎯 **预期效果**
- 用户可自由选择任意图标表示任务
- 保持现有功能的同时提供更大灵活性
- 为未来的图标自定义功能奠定基础

## 📁 **关键文件清单**
- `src/types/common.ts` - TaskType 枚举定义
- `src/types/task.ts` - Task 接口定义
- `src/components/TaskIcon.tsx` - 图标组件
- `src/components/gantt/TaskIconSelector.tsx` - 图标选择器
- `src/components/icons/index.ts` - 图标库导出

## 🔄 **实施步骤**
1. 扩展图标库 (添加更多 lucide-react 图标)
2. 修改类型定义 (TaskType → iconType: string)
3. 重构 TaskIcon 组件 (支持动态图标)
4. 更新 TaskIconSelector UI (网格布局)
5. 批量更新所有引用文件
6. 测试和验证功能完整性